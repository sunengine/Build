(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"099a":function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("SunPage",{staticClass:"roles-page page-padding"},[s("PageHeader",{attrs:{title:t.title}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-4"},[t.roles?[s("div",{staticClass:"roles-page__header q-mb-sm"},[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.RolesPage.users}}),t._v("\n\t\t\t\t\t"+t._s(t.$tl("roles"))+"\n\t\t\t\t")],1),s("div",{staticClass:"roles-page__list "},t._l(t.roles,(function(e){return s("div",{key:e.id,staticClass:"roles-page__role"},[s("router-link",{staticClass:"roles-page__role-link link",attrs:{to:{name:"RoleUsers",params:{roleName:e.name}}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t")])],1)})),0)]:s("div",[s("LoaderWait")],1)],2),s("router-view",{staticClass:"roles-page__router-view col-xs-12 col-sm-8"})],1)],1)},n=[],o=s("e856"),a={name:"RolesPage",mixins:[o["Page"]],data:function(){return{roles:null,currentRole:null}},computed:{breadcrumbsCategory:function(){return this.$getBreadcrumbs("Admin")}},methods:{loadAllRoles:function(){var t=this;this.$request(this.$AdminApi.UserRolesAdmin.GetAllRoles).then((function(e){t.roles=e.data}))}},created:function(){this.title=this.$tl("title"),this.loadAllRoles()}},r=a,i=(s("1d33"),s("2877")),c=s("0016"),u=s("eebe"),d=s.n(u),m=Object(i["a"])(r,l,n,!1,null,null,null);e["a"]=m.exports;d()(m,"components",{QIcon:c["a"]})},1452:function(t,e,s){"use strict";var l=s("64de"),n=s.n(l);n.a},"1d33":function(t,e,s){"use strict";var l=s("c274"),n=s.n(l);n.a},"2ba8":function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-roles"},[t.userRoles?s("div",[s("div",{staticClass:"profile-roles__user-groups"},[s("div",{staticClass:"profile-roles__roles-title"},[t._v(t._s(t.$tl("roles")))]),s("div",{staticClass:"profile-roles__roles-block q-my-md"},t._l(t.userRoles,(function(e){return s("span",{staticClass:"profile-roles__group",class:"group-"+e.name.toLowerCase()},[t._v(t._s(e.title))])})),0)]),s("div",{staticClass:"flex q-gutter-md"},[s("q-btn",{staticClass:"grow",attrs:{"no-caps":"",color:"positive",icon:t.$iconsSet.ProfileRoles.plus,label:t.$tl("addRoleBtn")},on:{click:function(e){t.add=!0}}}),s("q-btn",{staticClass:"grow",attrs:{"no-caps":"",color:"negative",icon:t.$iconsSet.ProfileRoles.minus,label:t.$tl("removeRoleBtn")},on:{click:function(e){t.remove=!0}}}),s("q-dialog",{ref:"addRole",staticClass:"profile-roles__dialog-add",model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[s("div",{staticClass:"bg-white"},[s("q-list",[s("q-toolbar",{staticClass:"bg-positive text-white shadow-2"},[s("q-toolbar-title",[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.ProfileRoles.plus}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$tl("addRoleBtn"))+"\n\t\t\t\t\t\t\t")],1)],1),t._l(t.availableRoles,(function(e){return s("q-item",{key:e.name,attrs:{clickable:""},on:{click:function(s){return t.addToRoleConfirm(e)}}},[s("q-item-section",[s("q-item-label",{staticClass:"text-blue"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t")])],1)],1)}))],2),s("div",{staticClass:"text-center q-my-md"},[s("q-btn",{staticClass:"self-center cancel-btn",attrs:{flat:"",label:t.$t("Global.btn.cancel")},on:{click:function(e){return t.$refs.addRole.hide()}}})],1)],1)]),s("q-dialog",{ref:"remove",staticClass:"profile-roles__dialog-remove",model:{value:t.remove,callback:function(e){t.remove=e},expression:"remove"}},[s("div",{staticClass:"bg-white"},[s("q-list",[s("q-toolbar",{staticClass:"bg-negative text-white shadow-2"},[s("q-toolbar-title",[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.ProfileRoles.minus}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$tl("removeRoleBtn"))+"\n\t\t\t\t\t\t\t")],1)],1),t._l(t.userRoles,(function(e){return s("q-item",{key:e.name,attrs:{clickable:""},on:{click:function(s){return t.removeFromRoleConfirm(e)}}},[s("q-item-section",[s("q-item-label",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t")])],1)],1)}))],2),s("div",{staticClass:"text-center q-my-md"},[s("q-btn",{staticClass:"self-center cancel-btn",attrs:{flat:"",label:t.$t("Global.btn.cancel")},on:{click:function(e){return t.$refs.remove.hide()}}})],1)],1)])],1)]):s("LoaderWait")],1)},n=[],o=s("967e"),a=s.n(o),r=(s("96cf"),s("fa84")),i=s.n(r),c=(s("7f7f"),s("c5f6"),{name:"ProfileRoles",props:{userId:{type:Number,required:!0}},data:function(){return{allRoles:null,userRoles:null,availableRoles:null,add:!1,remove:!1}},methods:{addToRoleConfirm:function(t){var e=this;this.add=!1;var s=this.$tl("addRoleConfirmTitle",{roleName:t.title}),l=this.$tl("addRoleConfirmMessage",{roleName:t.title}),n=this.$tl("addRoleConfirmOkBtn"),o=this.$tl("addRoleConfirmCancelBtn");this.$q.dialog({title:s,message:l,ok:n,cancel:o}).onOk((function(){e.addToRole(t)}))},removeFromRoleConfirm:function(t){var e=this;this.remove=!1;var s=this.$tl("removeRoleConfirmTitle",{roleName:t.title}),l=this.$tl("removeRoleConfirmMessage",{roleName:t.title}),n=this.$tl("removeRoleConfirmOkBtn"),o=this.$tl("removeRoleConfirmCancelBtn");this.$q.dialog({title:s,message:l,ok:n,cancel:o}).onOk((function(){e.removeFromRole(t)}))},addToRole:function(t){var e=this;return this.$request(this.$AdminApi.UserRolesAdmin.AddUserToRole,{userId:this.userId,roleName:t.name}).then((function(){e.loadUserRoles()}))},removeFromRole:function(t){var e=this;return this.$request(this.$AdminApi.UserRolesAdmin.RemoveUserFromRole,{userId:this.userId,roleName:t.name}).then((function(){e.loadUserRoles()}))},loadUserRoles:function(){var t=this;return this.$request(this.$AdminApi.UserRolesAdmin.GetUserRoles,{userId:this.userId}).then((function(e){t.userRoles=e.data,t.availableRoles=t.allRoles.filter((function(e){return!t.userRoles.some((function(t){return t.name===e.name}))}))}))},loadAllRoles:function(){var t=this;return this.$request(this.$AdminApi.UserRolesAdmin.GetAllRoles).then((function(e){t.allRoles=e.data}))}},created:function(){var t=this;return i()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadAllRoles();case 2:return e.next=4,t.loadUserRoles();case 4:case"end":return e.stop()}}),e)})))()}}),u=c,d=(s("6c27"),s("2877")),m=s("9c40"),f=s("24e8"),h=s("1c1c"),v=s("65c6"),p=s("6ac5"),_=s("0016"),R=s("66e5"),b=s("4074"),$=s("0170"),g=s("eebe"),C=s.n(g),q=Object(d["a"])(u,l,n,!1,null,null,null);e["a"]=q.exports;C()(q,"components",{QBtn:m["a"],QDialog:f["a"],QList:h["a"],QToolbar:v["a"],QToolbarTitle:p["a"],QIcon:_["a"],QItem:R["a"],QItemSection:b["a"],QItemLabel:$["a"]})},"64de":function(t,e,s){},6652:function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("SunPage",{staticClass:"roles-permissions page-padding"},[s("PageHeader",{attrs:{title:t.title}}),null!==t.json?s("div",{staticClass:"q-gutter-y-lg"},[s("q-input",{attrs:{filled:"","input-class":"roles-permissions__json-input",type:"textarea",label:t.$tl("textAreaLabel")},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),s("div",{staticClass:"roles-permissions__btn-block flex q-gutter-md"},[s("q-btn",{staticClass:"send-btn",attrs:{"no-caps":"",icon:t.$iconsSet.RolesPermissions.save,loading:t.loading,label:t.$tl("saveToServerBtn")},on:{click:t.send}},[s("LoaderSent",{attrs:{slot:"loading"},slot:"loading"})],1),s("q-space"),s("q-btn",{staticClass:"refresh-btn",attrs:{"no-caps":"",color:"info",icon:t.$iconsSet.RolesPermissions.reset,label:t.$tl("getFromServer")},on:{click:t.loadDataRefresh}})],1),t.error?s("div",{staticClass:"roles-permissions__json-error"},[s("q-icon",{staticClass:"q-mr-md q-mt-xs float-left",attrs:{name:"fas fa-exclamation-triangle",size:"24px"}}),t.error.message?s("div",{staticClass:"roles-permissions__message"},[t._v("\n\t\t\t\t"+t._s(t.error.message)+"\n\t\t\t")]):t._e(),t.error.text?s("div",{staticClass:"roles-permissions__stack"},[t._v("\n\t\t\t\t"+t._s(t.error.text)+"\n\t\t\t")]):t._e()],1):t._e()],1):s("LoaderWait")],1)},n=[],o=(s("551c"),s("06db"),s("097d"),s("967e")),a=s.n(o),r=(s("96cf"),s("fa84")),i=s.n(r),c=s("e856"),u={name:"RolesPermissions",mixins:[c["Page"]],data:function(){return{json:null,error:null,loading:!1}},computed:{breadcrumbsCategory:function(){return this.$getBreadcrumbs("Admin")}},methods:{loadDataRefresh:function(){var t=this;return i()(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:t.$successNotify(t.$tl("getSuccessNotify"),"info");case 3:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;this.json=null,this.$request(this.$AdminApi.RolesPermissionsAdmin.GetJson).then((function(e){t.error=null,t.json=e.data.json})).catch((function(e){t.$errorNotify(e)}))},send:function(){var t=this;this.loading=!0,this.$request(this.$AdminApi.RolesPermissionsAdmin.UploadJson,{json:this.json,blockErrorsNotifications:!0}).then((function(){t.error=null,t.$successNotify(t.$tl("saveSuccessNotify"))})).catch((function(e){t.error=e.response.data,t.$errorNotify(e,t.error.message)})).finally((function(e){t.loading=!1}))}},created:function(){this.title=this.$tl("title"),this.loadData()}},d=u,m=(s("7a42"),s("2877")),f=s("27f9"),h=s("9c40"),v=s("2c91"),p=s("0016"),_=s("eebe"),R=s.n(_),b=Object(m["a"])(d,l,n,!1,null,null,null);e["a"]=b.exports;R()(b,"components",{QInput:f["a"],QBtn:h["a"],QSpace:v["a"],QIcon:p["a"]})},"6bd0":function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"role-users"},[s("div",{staticClass:"role-users__header"},[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.RoleUsers.user}}),t._v("\n\t\t"+t._s(t.$tl("users"))+"\n\t")],1),s("q-input",{staticClass:"role-users__filter q-my-md",attrs:{outlined:"",dense:"",label:t.$tl("filter"),clearable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:t.$iconsSet.RoleUsers.search,size:"0.75em"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t.users?s("div",{staticClass:"role-users__list"},[t._l(t.users,(function(e){return s("div",{key:e.id,staticClass:"role-users__user"},[s("router-link",{staticClass:"role-users__user-link link",attrs:{to:"/user/"+e.link}},[t._v(t._s(e.name))])],1)})),0===t.users.length?s("div",{staticClass:"text-grey"},[t._v(t._s(t.$tl("noResults")))]):t._e(),t.users.length===t.maxUsersTake?s("div",{staticClass:"text-grey"},[t._v("\n\t\t\t"+t._s(t.$tl("filterLimitReached",{maxUsersTake:t.maxUsersTake}))+"\n\t\t")]):t._e()],2):s("div",[s("LoaderWait")],1)],1)},n=[],o={name:"RoleUsers",props:{roleName:{type:String,required:!0}},data:function(){return{users:null,filter:null}},computed:{maxUsersTake:function(){return config.Admin.RoleUsersMaxUsersTake}},methods:{loadRoleUsers:function(){var t=this;this.users=null,this.$request(this.$AdminApi.UserRolesAdmin.GetRoleUsers,{roleName:this.roleName,userNamePart:this.filter}).then((function(e){t.users=e.data}))}},created:function(){this.loadRoleUsers(),this.$watch("roleName",this.loadRoleUsers),this.loadRoleUsers=this.$throttle(this.loadRoleUsers),this.$watch("filter",this.loadRoleUsers)}},a=o,r=(s("1452"),s("2877")),i=s("0016"),c=s("27f9"),u=s("eebe"),d=s.n(u),m=Object(r["a"])(a,l,n,!1,null,null,null);e["a"]=m.exports;d()(m,"components",{QIcon:i["a"],QInput:c["a"]})},"6c27":function(t,e,s){"use strict";var l=s("cb99"),n=s.n(l);n.a},"7a42":function(t,e,s){"use strict";var l=s("c29f"),n=s.n(l);n.a},c274:function(t,e,s){},c29f:function(t,e,s){},cb99:function(t,e,s){}}]);
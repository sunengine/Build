(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"099a":function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("SunPage",{staticClass:"roles-page page-padding"},[s("PageHeader",{attrs:{title:t.title}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-4"},[t.roles?[s("div",{staticClass:"roles-page__header q-mb-sm"},[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.RolesPage.users}}),t._v("\n\t\t\t\t\t"+t._s(t.$tl("roles"))+"\n\t\t\t\t")],1),s("div",{staticClass:"roles-page__list "},t._l(t.roles,(function(e){return s("div",{key:e.id,staticClass:"roles-page__role"},[s("router-link",{staticClass:"roles-page__role-link link",attrs:{to:{name:"RoleUsers",params:{roleName:e.name}}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t")])],1)})),0)]:s("div",[s("LoaderWait")],1)],2),s("router-view",{staticClass:"roles-page__router-view col-xs-12 col-sm-8"})],1)],1)},a=[],i=s("e856"),o={name:"RolesPage",mixins:[i["Page"]],data(){return{roles:null,currentRole:null}},computed:{breadcrumbsCategory(){return this.$getBreadcrumbs("Admin")}},methods:{loadAllRoles(){this.$request(this.$AdminApi.UserRolesAdmin.GetAllRoles).then((t=>{this.roles=t.data}))}},created(){this.title=this.$tl("title"),this.loadAllRoles()}},r=o,n=(s("1d33"),s("2877")),c=s("0016"),d=s("eebe"),u=s.n(d),m=Object(n["a"])(r,l,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QIcon:c["a"]})},1452:function(t,e,s){"use strict";s("64de")},"1d33":function(t,e,s){"use strict";s("c274")},"2ba8":function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile-roles"},[t.userRoles?s("div",[s("div",{staticClass:"profile-roles__user-groups"},[s("div",{staticClass:"profile-roles__roles-title"},[t._v(t._s(t.$tl("roles")))]),s("div",{staticClass:"profile-roles__roles-block q-my-md"},t._l(t.userRoles,(function(e){return s("span",{staticClass:"profile-roles__group",class:"group-"+e.name.toLowerCase()},[t._v(t._s(e.title))])})),0)]),s("div",{staticClass:"flex q-gutter-md"},[s("q-btn",{staticClass:"grow",attrs:{"no-caps":"",color:"positive",icon:t.$iconsSet.ProfileRoles.plus,label:t.$tl("addRoleBtn")},on:{click:function(e){t.add=!0}}}),s("q-btn",{staticClass:"grow",attrs:{"no-caps":"",color:"negative",icon:t.$iconsSet.ProfileRoles.minus,label:t.$tl("removeRoleBtn")},on:{click:function(e){t.remove=!0}}}),s("q-dialog",{ref:"addRole",staticClass:"profile-roles__dialog-add",model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[s("div",{staticClass:"bg-white"},[s("q-list",[s("q-toolbar",{staticClass:"bg-positive text-white shadow-2"},[s("q-toolbar-title",[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.ProfileRoles.plus}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$tl("addRoleBtn"))+"\n\t\t\t\t\t\t\t")],1)],1),t._l(t.availableRoles,(function(e){return s("q-item",{key:e.name,attrs:{clickable:""},on:{click:function(s){return t.addToRoleConfirm(e)}}},[s("q-item-section",[s("q-item-label",{staticClass:"text-blue"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t")])],1)],1)}))],2),s("div",{staticClass:"text-center q-my-md"},[s("q-btn",{staticClass:"self-center cancel-btn",attrs:{flat:"",label:t.$t("Global.btn.cancel")},on:{click:function(e){return t.$refs.addRole.hide()}}})],1)],1)]),s("q-dialog",{ref:"remove",staticClass:"profile-roles__dialog-remove",model:{value:t.remove,callback:function(e){t.remove=e},expression:"remove"}},[s("div",{staticClass:"bg-white"},[s("q-list",[s("q-toolbar",{staticClass:"bg-negative text-white shadow-2"},[s("q-toolbar-title",[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.ProfileRoles.minus}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$tl("removeRoleBtn"))+"\n\t\t\t\t\t\t\t")],1)],1),t._l(t.userRoles,(function(e){return s("q-item",{key:e.name,attrs:{clickable:""},on:{click:function(s){return t.removeFromRoleConfirm(e)}}},[s("q-item-section",[s("q-item-label",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t")])],1)],1)}))],2),s("div",{staticClass:"text-center q-my-md"},[s("q-btn",{staticClass:"self-center cancel-btn",attrs:{flat:"",label:t.$t("Global.btn.cancel")},on:{click:function(e){return t.$refs.remove.hide()}}})],1)],1)])],1)]):s("LoaderWait")],1)},a=[],i={name:"ProfileRoles",props:{userId:{type:Number,required:!0}},data(){return{allRoles:null,userRoles:null,availableRoles:null,add:!1,remove:!1}},methods:{addToRoleConfirm(t){this.add=!1;const e=this.$tl("addRoleConfirmTitle",{roleName:t.title}),s=this.$tl("addRoleConfirmMessage",{roleName:t.title}),l=this.$tl("addRoleConfirmOkBtn"),a=this.$tl("addRoleConfirmCancelBtn");this.$q.dialog({title:e,message:s,ok:l,cancel:a}).onOk((()=>{this.addToRole(t)}))},removeFromRoleConfirm(t){this.remove=!1;const e=this.$tl("removeRoleConfirmTitle",{roleName:t.title}),s=this.$tl("removeRoleConfirmMessage",{roleName:t.title}),l=this.$tl("removeRoleConfirmOkBtn"),a=this.$tl("removeRoleConfirmCancelBtn");this.$q.dialog({title:e,message:s,ok:l,cancel:a}).onOk((()=>{this.removeFromRole(t)}))},addToRole(t){return this.$request(this.$AdminApi.UserRolesAdmin.AddUserToRole,{userId:this.userId,roleName:t.name}).then((()=>{this.loadUserRoles()}))},removeFromRole(t){return this.$request(this.$AdminApi.UserRolesAdmin.RemoveUserFromRole,{userId:this.userId,roleName:t.name}).then((()=>{this.loadUserRoles()}))},loadUserRoles(){return this.$request(this.$AdminApi.UserRolesAdmin.GetUserRoles,{userId:this.userId}).then((t=>{this.userRoles=t.data,this.availableRoles=this.allRoles.filter((t=>!this.userRoles.some((e=>e.name===t.name))))}))},loadAllRoles(){return this.$request(this.$AdminApi.UserRolesAdmin.GetAllRoles).then((t=>{this.allRoles=t.data}))}},async created(){await this.loadAllRoles(),await this.loadUserRoles()}},o=i,r=(s("6c27"),s("2877")),n=s("9c40"),c=s("24e8"),d=s("1c1c"),u=s("65c6"),m=s("6ac5"),h=s("0016"),f=s("66e5"),_=s("4074"),v=s("0170"),p=s("eebe"),R=s.n(p),b=Object(r["a"])(o,l,a,!1,null,null,null);e["a"]=b.exports;R()(b,"components",{QBtn:n["a"],QDialog:c["a"],QList:d["a"],QToolbar:u["a"],QToolbarTitle:m["a"],QIcon:h["a"],QItem:f["a"],QItemSection:_["a"],QItemLabel:v["a"]})},"64de":function(t,e,s){},6652:function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("SunPage",{staticClass:"roles-permissions page-padding"},[s("PageHeader",{attrs:{title:t.title}}),null!==t.json?s("div",{staticClass:"q-gutter-y-lg"},[s("q-input",{attrs:{filled:"","input-class":"roles-permissions__json-input",type:"textarea",label:t.$tl("textAreaLabel")},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}}),s("div",{staticClass:"roles-permissions__btn-block flex q-gutter-md"},[s("q-btn",{staticClass:"send-btn",attrs:{"no-caps":"",icon:t.$iconsSet.RolesPermissions.save,loading:t.loading,label:t.$tl("saveToServerBtn")},on:{click:t.send}},[s("LoaderSent",{attrs:{slot:"loading"},slot:"loading"})],1),s("q-space"),s("q-btn",{staticClass:"refresh-btn",attrs:{"no-caps":"",color:"info",icon:t.$iconsSet.RolesPermissions.reset,label:t.$tl("getFromServer")},on:{click:t.loadDataRefresh}})],1),t.error?s("div",{staticClass:"roles-permissions__json-error"},[s("q-icon",{staticClass:"q-mr-md q-mt-xs float-left",attrs:{name:"fas fa-exclamation-triangle",size:"24px"}}),t.error.message?s("div",{staticClass:"roles-permissions__message"},[t._v("\n\t\t\t\t"+t._s(t.error.message)+"\n\t\t\t")]):t._e(),t.error.text?s("div",{staticClass:"roles-permissions__stack"},[t._v("\n\t\t\t\t"+t._s(t.error.text)+"\n\t\t\t")]):t._e()],1):t._e()],1):s("LoaderWait")],1)},a=[],i=(s("a79d"),s("e856")),o={name:"RolesPermissions",mixins:[i["Page"]],data(){return{json:null,error:null,loading:!1}},computed:{breadcrumbsCategory(){return this.$getBreadcrumbs("Admin")}},methods:{async loadDataRefresh(){await this.loadData(),this.$successNotify(this.$tl("getSuccessNotify"),"info")},loadData(){this.json=null,this.$request(this.$AdminApi.RolesPermissionsAdmin.GetJson).then((t=>{this.error=null,this.json=t.data.json})).catch((t=>{this.$errorNotify(t)}))},send(){this.loading=!0,this.$request(this.$AdminApi.RolesPermissionsAdmin.UploadJson,{json:this.json,blockErrorsNotifications:!0}).then((()=>{this.error=null,this.$successNotify(this.$tl("saveSuccessNotify"))})).catch((t=>{this.error=t.response.data,this.$errorNotify(t,this.error.message)})).finally((t=>{this.loading=!1}))}},created(){this.title=this.$tl("title"),this.loadData()}},r=o,n=(s("7a42"),s("2877")),c=s("27f9"),d=s("9c40"),u=s("2c91"),m=s("0016"),h=s("eebe"),f=s.n(h),_=Object(n["a"])(r,l,a,!1,null,null,null);e["a"]=_.exports;f()(_,"components",{QInput:c["a"],QBtn:d["a"],QSpace:u["a"],QIcon:m["a"]})},"6bd0":function(t,e,s){"use strict";var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"role-users"},[s("div",{staticClass:"role-users__header"},[s("q-icon",{staticClass:"q-mr-sm",attrs:{name:t.$iconsSet.RoleUsers.user}}),t._v("\n\t\t"+t._s(t.$tl("users"))+"\n\t")],1),s("q-input",{staticClass:"role-users__filter q-my-md",attrs:{outlined:"",dense:"",label:t.$tl("filter"),clearable:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:t.$iconsSet.RoleUsers.search,size:"0.75em"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t.users?s("div",{staticClass:"role-users__list"},[t._l(t.users,(function(e){return s("div",{key:e.id,staticClass:"role-users__user"},[s("router-link",{staticClass:"role-users__user-link link",attrs:{to:"/user/"+e.link}},[t._v(t._s(e.name))])],1)})),0===t.users.length?s("div",{staticClass:"text-grey"},[t._v(t._s(t.$tl("noResults")))]):t._e(),t.users.length===t.maxUsersTake?s("div",{staticClass:"text-grey"},[t._v("\n\t\t\t"+t._s(t.$tl("filterLimitReached",{maxUsersTake:t.maxUsersTake}))+"\n\t\t")]):t._e()],2):s("div",[s("LoaderWait")],1)],1)},a=[],i={name:"RoleUsers",props:{roleName:{type:String,required:!0}},data(){return{users:null,filter:null}},computed:{maxUsersTake(){return config.Admin.RoleUsersMaxUsersTake}},methods:{loadRoleUsers(){this.users=null,this.$request(this.$AdminApi.UserRolesAdmin.GetRoleUsers,{roleName:this.roleName,userNamePart:this.filter}).then((t=>{this.users=t.data}))}},created(){this.loadRoleUsers(),this.$watch("roleName",this.loadRoleUsers),this.loadRoleUsers=this.$throttle(this.loadRoleUsers),this.$watch("filter",this.loadRoleUsers)}},o=i,r=(s("1452"),s("2877")),n=s("0016"),c=s("27f9"),d=s("eebe"),u=s.n(d),m=Object(r["a"])(o,l,a,!1,null,null,null);e["a"]=m.exports;u()(m,"components",{QIcon:n["a"],QInput:c["a"]})},"6c27":function(t,e,s){"use strict";s("cb99")},"7a42":function(t,e,s){"use strict";s("c29f")},c274:function(t,e,s){},c29f:function(t,e,s){},cb99:function(t,e,s){}}]);